# Based on Debian (node:14 image)
FROM node:14

ARG PGUSER
ARG PGPASSWORD
ARG PGDATABASE
ARG PGHOST
ARG PGHOST_PRODUCTION
ARG PGPORT

ENV PGUSER=$PGUSER
ENV PGPASSWORD=$PGPASSWORD
ENV PGDATABASE=$PGDATABASE
ENV PGHOST=$PGHOST
ENV PGHOST_PRODUCTION=$PGHOST_PRODUCTION
ENV PGPORT=$PGPORT

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 8080
CMD ["node", "src/server.js"]
